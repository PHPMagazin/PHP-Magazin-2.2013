class MessageQueue {  public function isActive() {}  public function isEmpty() {}}function allQueuesEmpty(array $queues) {  return array_reduce(    array_map(      function(MessageQueue $q) {        return $q->isEmpty();      },      array_filter(        $queues,        function(MessageQueue $q) {          return $q->isActive();        }      )    ),    function($empty, $previous) {      return $empty && $previous;    },    true  );}