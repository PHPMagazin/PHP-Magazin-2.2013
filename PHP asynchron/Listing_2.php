public function ev_accept($socket, $flag, $base) {  $connection = stream_socket_accept($socket);  stream_set_blocking($connection, 0);  self::$id += 1;  $buffer = event_buffer_new(    $connection,    array($this, 'ev_request'),    array($this, 'ev_response'),    array($this, 'ev_error'),    self::$id);  event_buffer_base_set($buffer, $base);  event_buffer_timeout_set($buffer, 30, 30);  event_buffer_watermark_set($buffer, EV_WRITE, 0, 0xffffff);  event_buffer_priority_set($buffer, 10);  // we need to save both buffer and connection outside  $this->connections[self::$id] = $connection;  $this->buffers    [self::$id] = $buffer;  $this->requests   [self::$id] = "";  event_buffer_enable($buffer, EV_READ);}